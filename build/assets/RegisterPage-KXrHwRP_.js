import{e as S,f as w,o as A,r as l,u as P,g as L,i as M,j as e,F as p,T as k,B as E,A as O,p as F,l as b,q as Q,H as V}from"./index-DtHtMXPn.js";import{R as I,S as y}from"./Statements-DWY6vkFy.js";const H="_register_4w7cp_1",G="_register__container_4w7cp_16",Z="_register__link_4w7cp_29",T={register:H,register__container:G,register__link:Z},$="_formRegister__container_7iwk9_1",D="_formRegister__windows_7iwk9_15",K="_formRegister__form_7iwk9_20",U="_formRegister__titleContainer_7iwk9_38",q="_formRegister__sectionTitle_7iwk9_41",W="_formRegister__iconCheckPassword_7iwk9_50",J="_formRegister__instructions_7iwk9_58",X="_formRegister__instructionsTitle_7iwk9_69",Y="_formRegister__instructionsText_7iwk9_81",ee="_formRegister__instructionsTextHighlighted_7iwk9_89",a={formRegister__container:$,formRegister__windows:D,formRegister__form:K,formRegister__titleContainer:U,formRegister__sectionTitle:q,formRegister__iconCheckPassword:W,formRegister__instructions:J,formRegister__instructionsTitle:X,formRegister__instructionsText:Y,formRegister__instructionsTextHighlighted:ee},se={PL:{register:"Zarejestruj się",name:"Imię:",lastName:"Nazwisko:",email:"Adres e-mail:",password:"Hasło:",passwordConfirm:"Powtórz hasło:",tshirt:"Rozmiar koszulki:",tshirtTypeFemale:"Damska",tshirtTypeMale:"Męska",tshirtTypeChild:"Dziecięca",button:"Zarejestruj się",account:"Masz już konto? ",login:"Zaloguj się",instructionsTitle:"Po zarejestrowaniu się i utworzeniu konta na stronie, otrzymasz możliwość ZAPISU NA BIEG. ",instructionsCost:"Koszt zapisu na bieg wynosi:",cost1:"30 zł",costAdult:" za osobę dorosłą.",cost2:"20 zł",costChild:" za dziecko (płatność tylko za dzieci, które będą pobierać pakiet startowy. Koszulki dziecięce będą dostępne w rozmiarach 104 i 116).",costGeneral:"Opłata zawiera cenę pakietu startowego, w którego skład wchodzą: koszulka z logo Fundacji, numer startowy, woda."},EN:{register:"Register",name:"Name:",lastName:"Last name:",email:"E-mail address:",password:"Password:",passwordConfirm:"Confirm passowrd:",tshirt:"T-shirt size:",tshirtTypeFemale:"Female",tshirtTypeMale:"Male",tshirtTypeChild:"Child",button:"Register",account:"Already registered? ",login:"Log in",instructionsTitle:"After registering and creating an account on the website, you will receive the opportunity to SIGN UP FOR A RUN.",instructionsCost:"The cost of signing up for the run is:",cost1:"30 PLN",costAdult:" per adult participant.",cost2:"20 PLN",costChild:" per children (payment is only for children who will be receiving a starter pack. Children's shirts will be available in sizes 104 and 116).",costGeneral:"The fee includes the price of the starter pack, which includes: a T-shirt with the Foundation's logo, a race number, and water."}},re=S({name:w().min(2,"Minimum 2 characters").max(25,"Maximum 30 characters").required("Required field"),surname:w().min(2,"Minimum 2 characters").max(25,"Maximum 30 characters").required("Required field"),email:w().email("Invalid email format").required("Required field"),password:w().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^da-zA-Z]).{8,}$/,"Min 8 chars, incl. uppercase, number & symbol").required("Required!"),passwordConfirm:w().oneOf([A("password")],"Passwords must match").required("Required field")});function te(r,i){if(i===r)return!1;const t=Object.values(i),n=Object.values(r);if(t.length!==n.length||t.some((c,d)=>c!==n[d]))return!0;const o=Object.keys(r);return Object.keys(i).some((c,d)=>c!==o[d])}function ie(r,i){return r.matches[i]=!1,r.mediaQueries[i]={},r}function v(r){const i=Object.keys(r);return typeof window>"u"?i.reduce(ie,{mediaQueries:{},matches:{}}):i.reduce((t,n)=>{const o=window.matchMedia(r[n]);return t.mediaQueries[n]=o,t.matches[n]=o.matches,t},{mediaQueries:{},matches:{}})}function ne(r,i){function t(n,o){return n[o]=r.mediaQueries[o].matches,n}switch(i.type){case"updateMatches":return{matches:Object.keys(r.mediaQueries).reduce(t,{}),mediaQueries:r.mediaQueries};case"setQueries":return v(i.queries)}}function oe(r){const i=l.useRef(r),[t,n]=l.useReducer(ne,r,v);l.useEffect(()=>{te(r,i.current)&&(n({type:"setQueries",queries:r}),i.current=r)},[r]);function o(){return n({type:"updateMatches"})}function c(m){const u=o;return typeof m.addListener<"u"?m.addListener(u):m.addEventListener("change",u),u}l.useEffect(()=>{const m=Object.values(t.mediaQueries),u=m.map(c);function x(h,f){typeof h.addListener<"u"?h.removeListener(u[f]):h.removeEventListener("change",u[f])}return()=>{m.forEach(x)}},[t.mediaQueries]);const{matches:d}=t,g=l.useMemo(()=>Object.values(d),[d]);return{matches:d,matchesAny:g.some(Boolean),matchesAll:g.length>0&&g.every(Boolean)}}function ae(r){return oe(ce(r)).matchesAll}const j={};function ce(r){return j[r]===void 0&&(j[r]={default:r}),j[r]}const le=()=>{const{language:r}=P(),{setIsLoading:i}=L(),t=se[r],[n,o]=l.useState(!1),[c,d]=l.useState(!1),[g,m]=l.useState(!1),[u,x]=l.useState(!1),h=ae("(min-width: 1360px)");l.useEffect(()=>{const _=R=>{R.key==="Escape"&&o(!1)};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}},[]);const f=()=>{o(!0)},z=()=>{o(!1)},C=()=>{d(!c)},s=M({initialValues:{name:"",surname:"",email:"",password:"",passwordConfirm:"",language:r},validationSchema:re,onSubmit:_=>{const{passwordConfirm:R,...N}=_;console.log(R),(async()=>{try{i(!0),await F(N),b.info("Registration successful! Please check your email to verify your account.")}catch(B){console.error(B),b.error("An error occurred. Please try again.")}finally{i(!1)}})(),s.resetForm()}});return n?e.jsx(I,{onClose:z}):e.jsxs("div",{className:a.formRegister__container,children:[e.jsxs("div",{className:a.formRegister__windows,children:[e.jsxs("form",{className:a.formRegister__form,onSubmit:s.handleSubmit,children:[e.jsx("div",{className:a.formRegister__titleContainer,children:e.jsx("p",{className:a.formRegister__sectionTitle,children:t.register})}),e.jsx(p,{error:{condition:!!(s.touched.name&&s.errors.name),message:String(s.errors.name)},label:t.name,id:"name",children:e.jsx("input",{type:"text",name:"name",id:"name",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.name})}),e.jsx(p,{error:{condition:!!(s.touched.surname&&s.errors.surname),message:String(s.errors.surname)},label:t.lastName,id:"surname",children:e.jsx("input",{type:"text",name:"surname",id:"surname",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.surname})}),e.jsx(p,{error:{condition:!!(s.touched.email&&s.errors.email),message:String(s.errors.email)},label:t.email,id:"email",children:e.jsx("input",{type:"text",name:"email",id:"email",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email})}),e.jsx(p,{error:{condition:!!(s.touched.password&&s.errors.password),message:String(s.errors.password)},label:t.password,id:"password",children:e.jsxs(e.Fragment,{children:[e.jsx("input",{type:g?"text":"password",name:"password",id:"password",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password}),e.jsx(k,{isVisible:g,toggleVisibility:()=>m(_=>!_),password:s.values.password})]})}),e.jsx(p,{error:{condition:!!(s.touched.passwordConfirm&&s.errors.passwordConfirm),message:String(s.errors.passwordConfirm)},label:t.passwordConfirm,id:"passwordConfirm",children:e.jsxs(e.Fragment,{children:[e.jsx("input",{type:u?"text":"password",name:"passwordConfirm",id:"passwordConfirm",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.passwordConfirm}),e.jsx(k,{isVisible:u,toggleVisibility:()=>x(_=>!_),password:s.values.passwordConfirm})]})}),!h&&e.jsx(y,{consent:c,handleIconClick:C,openModal:f}),e.jsx(E,{type:"submit",content:t.button,disabled:!s.isValid||!s.dirty||!c}),e.jsx(O,{type:"login"})]}),h&&e.jsx(y,{consent:c,handleIconClick:C,openModal:f})]}),e.jsxs("div",{className:a.formRegister__instructions,children:[e.jsx("h4",{className:a.formRegister__instructionsTitle,children:t.instructionsTitle}),e.jsx("p",{className:a.formRegister__instructionsText,children:t.instructionsCost}),e.jsxs("p",{className:a.formRegister__instructionsText,children:[e.jsx("span",{className:a.formRegister__instructionsTextHighlighted,children:t.cost1}),t.costAdult]}),e.jsxs("p",{className:a.formRegister__instructionsText,children:[e.jsx("span",{className:a.formRegister__instructionsTextHighlighted,children:t.cost2}),t.costChild]}),e.jsx("p",{className:a.formRegister__instructionsText,children:t.costGeneral})]})]})},de=()=>e.jsx("section",{className:T.register,children:e.jsxs("div",{className:T.register__container,children:[e.jsx(Q,{}),e.jsx(le,{})]})});function ge(){return e.jsxs("div",{children:[e.jsx(V,{children:e.jsx("title",{children:"Register"})}),e.jsx(de,{})]})}export{ge as default};
